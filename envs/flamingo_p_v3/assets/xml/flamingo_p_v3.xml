<mujoco model="flamingo_v3">
    <compiler angle="radian" balanceinertia="true"/>
    <option timestep="0.005" gravity="0 0 -9.807" iterations="50" solver="Newton" jacobian="dense" integrator="implicitfast"/>
 
    <visual>
        <headlight diffuse="1 1 1" ambient="0.3 0.3 0.3" specular="0 0 0"/>
        <rgba haze="0.15 0.25 0.35 1"/>
        <global azimuth="220" elevation="-20"/>
    </visual>

    <default>
        <default class="visual">
            <geom type="mesh" contype="0" conaffinity="0" group="2"/>
        </default>

        <default class="collision">
            <geom group="3"/>
        </default>

        <default class="collision_mesh">
            <geom contype="1" conaffinity="1" group="0"/>
        </default>

        <joint damping="1.0" stiffness="0.0" frictionloss="0.1" armature="0.01" actuatorfrclimited="true" actuatorfrcrange="-1000 1000"/>
        <default class='wheels'>
            <joint damping="0.0" stiffness="0.0" frictionloss="0.1" armature="0.01" actuatorfrclimited="true" actuatorfrcrange="-1000 1000"/>
        </default>
    </default>

    <worldbody>

        <geom name="ground" pos="0 0 0" type="hfield" material="MatPlane" friction="0.8 0.02 0.01" condim="3"/>
        <body name="base_link" pos="0.00000000 0.00000000 0.61282" quat="1 0 0 0">
            <!-- base_link from URDF -->
            <inertial pos="0.06464867 -0.00057063 -0.03327366"
                      mass="5.70413"
                      fullinertia="0.03791116 0.05186259 0.05950067 0.00026766 0.00061037 -0.00011054"/>        
            <geom type="mesh" mesh="base_link"
                  rgba="0.752941176470588 0.752941176470588 0.752941176470588 1"
                  class="visual"/>                
            <site name="base_link_site" pos="0 0 0" size="0.01" rgba="0.2 0.2 0.2 1" />
            <joint name="base_free_joint" type="free" damping="0.0" />            
            <site name='imu' size='0.01' pos='0.0 0 0.0'/>

            <!-- LEFT CHAIN -->
            <body name="left_hip_link"
                  pos="0.11825 0.0765 -0.086692"
                  quat="0.4999981633974483 0.49999999999662686 -0.5000018366025516 -0.49999999999662686">
                <inertial pos="0.04585602 -0.00063927 0.07351745"
                          mass="1.27259"
                          fullinertia="0.00256105 0.00229765 0.00143469 0.0 -0.00012237 0.00000001"/>
                <joint name="left_hip_joint" 
                       range="-0.6 0.6"
                       axis="0 0 1"
                       actuatorfrcrange="-60 60" />
                <geom type="mesh"
                      rgba="0.752941176470588 0.752941176470588 0.752941176470588 1"
                      mesh="left_hip_link"/>

                <body name="left_shoulder_link"
                      pos="0.0066 0 0.0735"
                      quat="0.7071054825112363 0.0 -0.7071080798594735 0.0">
                    <inertial pos="0.04107756 -0.02670782 0.05424895"
                              mass="2.40465"
                              fullinertia="0.01196147 0.01275884 0.0210508 0.00839151 -0.00145217 0.00123661"/>
                    <joint name="left_shoulder_joint" 
                           range="-1.6 1.53"
                           axis="0 0 1"
                           actuatorfrcrange="-60 60" />
                    <geom type="mesh"
                          rgba="0.752941176470588 0.752941176470588 0.752941176470588 1"
                          mesh="left_shoulder_link"/>

                    <body name="left_leg_link"
                          pos="0.19142 -0.20435 0.089"
                          quat="1.0 0.0 0.0 0.0">
                        <inertial pos="-0.13973212 -0.17015882 -0.01340923"
                                  mass="1.0663"
                                  fullinertia="0.00674436 0.00447847 0.01072555 -0.00476402 -0.0003232 -0.00040726"/>
                        <joint name="left_leg_joint" 
                               range="-0.64 1.35"
                               axis="0 0 1"
                               actuatorfrcrange="-60 60" />
                        <geom type="mesh"
                              rgba="0.203921568627451 0.203921568627451 0.203921568627451 1"
                              mesh="left_leg_link"/>

                        <body name="left_wheel_link"
                              pos="-0.17756 -0.21931 0.0035"
                              quat="1.0 0.0 0.0 0.0">
                            <inertial pos="-0.00007066 -0.00003360 0.02143371"
                                      mass="0.66408"
                                      fullinertia="0.00162303 0.00162304 0.00306696 0 0 0"/>
                            <!-- URDF lower=upper=0 -> fixed hinge: limited + range 0 0 -->
                            <joint name="left_wheel_joint" 
                                   range="0 0"
                                   axis="0 0 1"
                                   actuatorfrcrange="-36 36"
                                   class="wheels"/>
                            <geom type="mesh"
                                  rgba="0.792156862745098 0.819607843137255 0.933333333333333 1"
                                  mesh="left_wheel_link"/>
                        </body>
                    </body>
                </body>
            </body>

            <!-- RIGHT CHAIN -->
            <body name="right_hip_link"
                  pos="0.11825 -0.0765 -0.086692"
                  quat="0.4999981633974483 0.49999999999662686 -0.5000018366025516 -0.49999999999662686">
                <inertial pos="-0.04585602 0.00063927 0.07351745"
                          mass="1.27259"
                          fullinertia="0.00256105 0.00229765 0.00143469 0 0.00012237 -0.00000001"/>
                <joint name="right_hip_joint" 
                       range="-0.6 0.6"
                       axis="0 0 1"
                       actuatorfrcrange="-60 60" />
                <geom type="mesh"
                      rgba="0.752941176470588 0.752941176470588 0.752941176470588 1"
                      mesh="right_hip_link"/>

                <body name="right_shoulder_link"
                      pos="-0.0066 0 0.0735"
                      quat="0.7071054825112363 0.0 0.7071080798594735 0.0">
                    <inertial pos="-0.04075044 -0.02632598 0.05460245"
                              mass="2.40465"
                              fullinertia="0.01196106 0.01275767 0.02104904 -0.00839075 0.00145234 0.00123681"/>
                    <joint name="right_shoulder_joint" 
                           range="-1.6 1.53"
                           axis="0 0 -1"
                           actuatorfrcrange="-60 60" />       
                    <geom type="mesh"
                          rgba="0.796078431372549 0.823529411764706 0.937254901960784 1"
                          mesh="right_shoulder_link"/>

                    <body name="right_leg_link"
                          pos="-0.19142 -0.20435 0.089"
                          quat="1.0 0.0 0.0 0.0">
                        <inertial pos="0.13990134 -0.17022975 -0.01339899"
                                  mass="1.0663"
                                  fullinertia="0.00674448 0.00447867 0.01072585 0.00476417 0.00032314 -0.0004072"/>
                        <joint name="right_leg_joint" 
                               range="-0.64 1.35"
                               axis="0 0 -1"
                               actuatorfrcrange="-60 60" />
                        <geom type="mesh"
                              rgba="0.203921568627451 0.203921568627451 0.203921568627451 1"
                              mesh="right_leg_link"/>

                        <body name="right_wheel_link"
                              pos="0.17756 -0.21931 0.0035"
                              quat="1.0 0.0 0.0 0.0">
                            <inertial pos="-0.00005526 -0.00002059 0.02145859"
                                      mass="0.66408"
                                      fullinertia="0.00162304 0.00162304 0.00306696 0 0 0"/>
                            <joint name="right_wheel_joint" 
                                   range="0 0"
                                   axis="0 0 -1"
                                   actuatorfrcrange="-36 36"
                                   class="wheels"/>
                            <geom type="mesh"
                                  rgba="0.298039215686275 0.298039215686275 0.298039215686275 1"
                                  mesh="right_wheel_link"/>
                        </body>
                    </body>
                </body>
            </body>
        </body>
    </worldbody> 

    <asset>
        <texture type="skybox" builtin="gradient" rgb1="0.3 0.5 0.7" rgb2="0 0 0" width="512" height="3072"/>
        <texture type="2d" name="groundplane" builtin="checker" mark="edge" rgb1="0.2 0.3 0.4" rgb2="0.1 0.2 0.3" markrgb="0.8 0.8 0.8" width="300" height="300"/>
        <material name="MatPlane" texture="groundplane" texuniform="true" texrepeat="5 5" reflectance="0.2"/>
        <material name="rubber" rgba="0.4 0.4 0.4 1" shininess="0.5" reflectance="0.2"/>

        <mesh name="base_link"           file="../mesh/base_link_fixed.STL" />
        <mesh name="left_hip_link"       file="../mesh/left_hip_link.STL" />
        <mesh name="left_shoulder_link"  file="../mesh/left_shoulder_link.STL" />
        <mesh name="left_leg_link"       file="../mesh/left_leg_link.STL" />
        <mesh name="left_wheel_link"     file="../mesh/left_wheel_link.STL" />
        <mesh name="right_hip_link"      file="../mesh/right_hip_link.STL" />
        <mesh name="right_shoulder_link" file="../mesh/right_shoulder_link.STL" />
        <mesh name="right_leg_link"      file="../mesh/right_leg_link.STL" />
        <mesh name="right_wheel_link"    file="../mesh/right_wheel_link.STL" />
        
        <hfield name="flat" file="../terrain/flat.png" nrow="256" ncol="256" size="140 140 10 0.1"/>
        <hfield name="rocky_easy" file="../terrain/rocky_easy.png" nrow="512" ncol="512" size="140 140 0.1 0.1"/>
        <hfield name="rocky_hard" file="../terrain/rocky_hard.png" nrow="512" ncol="512" size="140 140 0.25 0.1"/>
        <hfield name="slope_easy" file="../terrain/slope_easy.png" nrow="512" ncol="512" size="140 140 0.5 0.1"/>
        <hfield name="slope_hard" file="../terrain/slope_hard.png" nrow="512" ncol="512" size="140 140 1 0.1"/>
        <hfield name="stairs_up_easy" file="../terrain/stairs_up_easy.png" nrow="512" ncol="512" size="5 5 0.60 0.5"/>
        <hfield name="stairs_up_normal" file="../terrain/stairs_up_normal.png" nrow="512" ncol="512" size="5 5 0.7 0.5"/>
        <hfield name="stairs_up_hard" file="../terrain/stairs_up_hard.png" nrow="512" ncol="512" size="5 5 0.825 0.5"/>
    </asset>

    <actuator>
        <motor joint="left_hip_joint" name="left_hip_joint" ctrllimited="true" ctrlrange="-1000 1000"  gear="1" />
        <motor joint="right_hip_joint" name="right_hip_joint" ctrllimited="true" ctrlrange="-1000 1000"  gear="1"/>
        <motor joint="left_shoulder_joint" name="left_shoulder_joint" ctrllimited="true" ctrlrange="-1000 1000"  gear="1"/>
        <motor joint="right_shoulder_joint" name="right_shoulder_joint" ctrllimited="true" ctrlrange="-1000 1000"  gear="1"/>
        <motor joint="left_leg_joint" name="left_leg_joint" ctrllimited="true" ctrlrange="-1000 1000"  gear="-1.5"/>
        <motor joint="right_leg_joint" name="right_leg_joint" ctrllimited="true" ctrlrange="-1000 1000"  gear="-1.5"/>
        <motor joint="left_wheel_joint" name="left_wheel_joint" ctrllimited="true" ctrlrange="-1000 1000" gear="1"/>
        <motor joint="right_wheel_joint" name="right_wheel_joint"  ctrllimited="true" ctrlrange="-1000 1000" gear="1"/>
    </actuator>
    
    <sensor>
        <framequat name="orientation" objtype="site" noise="0.1" objname="imu"/>
        <framepos name="position" objtype="site" noise="0.1" objname="imu"/>
        <gyro name="angular-velocity" site="imu" noise="0.2" cutoff="34.9"/>
        <velocimeter name="linear-velocity" site="imu" noise="0.1" cutoff="30"/>
        <accelerometer name="linear-acceleration" site="imu" noise="0.05" cutoff="157"/>
        <magnetometer name="magnetometer" site="imu"/>
    </sensor>

</mujoco>
